<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Faux TikTok Beta — iOS7</title>
<style>
html, body {margin:0; padding:0; height:100%; background:#000; overflow:hidden; font-family:sans-serif;}
.video-wrapper {position:relative; width:100%; height:100%; overflow:hidden;}
video {position:absolute; top:0; left:0; width:100%; height:100%; min-width:100%; min-height:100%;}
.overlay {position:absolute; bottom:80px; left:20px; color:#fff; font-size:16px; text-shadow:0 0 6px #000;}
.song {position:absolute; bottom:50px; left:20px; color:#fff; font-size:14px; text-shadow:0 0 6px #000;}
.username {position:absolute; bottom:110px; left:20px; color:#fff; font-size:14px; font-weight:bold; text-shadow:0 0 6px #000;}
.btn {position:absolute; top:20px; right:20px; background:#00d4ff; color:#000; padding:6px 10px; border-radius:8px; font-weight:bold;}
</style>
</head>
<body>

<div class="video-wrapper">
  <video id="videoPlayer" autoplay muted webkit-playsinline>
    <source src="1.mp4" type="video/mp4">
    Votre navigateur ne supporte pas la vidéo.
  </video>
  <div class="username" id="videoUser">@user1</div>
  <div class="overlay" id="videoLabel">Vidéo 1</div>
  <div class="song" id="videoSong">Song: Cool Track 1</div>
  <div class="btn" onclick="nextVideo()">Suivant ▶</div>
</div>

<script>
var videos = [
  {src:"1.mp4", user:"@user1", song:"Cool Track 1"},
  {src:"2.mp4", user:"@user2", song:"Fun Song 2"},
  {src:"3.mp4", user:"@user3", song:"Dance Beat 3"},
  {src:"4.mp4", user:"@user4", song:"Chill Vibes 4"},
  {src:"5.mp4", user:"@user5", song:"Party Song 5"}
];

var current = 0;
var videoPlayer = document.getElementById('videoPlayer');
var videoLabel = document.getElementById('videoLabel');
var videoUser = document.getElementById('videoUser');
var videoSong = document.getElementById('videoSong');

function loadVideo(index){
  var v = videos[index];
  // Mettre à jour texte avant de changer la source
  videoLabel.innerHTML = "Vidéo " + (index+1);
  videoUser.innerHTML = v.user;
  videoSong.innerHTML = "Song: " + v.song;
  
  videoPlayer.src = v.src;
  videoPlayer.load();
  videoPlayer.play();
}

function nextVideo(){
  current = (current + 1) % videos.length;
  loadVideo(current);
}

function prevVideo(){
  current = (current - 1 + videos.length) % videos.length;
  loadVideo(current);
}

// Swipe vertical simple
var startY = 0;
videoPlayer.addEventListener('touchstart', function(e){ startY = e.touches[0].clientY; });
videoPlayer.addEventListener('touchend', function(e){
  var diff = e.changedTouches[0].clientY - startY;
  if(diff < -50) nextVideo(); // swipe up
  if(diff > 50) prevVideo(); // swipe down
});

// Loop workaround iOS7
videoPlayer.addEventListener('ended', function(){ videoPlayer.play(); }, false);

// Initialisation
loadVideo(current);
</script>

</body>
</html>
